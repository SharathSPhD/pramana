%% System Architecture Diagram
%% Layered architecture showing CLI, Application, Domain, and Infrastructure layers

graph TB
    subgraph CLI["Layer 1: CLI"]
        CLI1[train command]
        CLI2[evaluate command]
        CLI3[validate command]
        CLI4[deploy command]
    end
    
    subgraph APP["Layer 2: Application"]
        APP1[MarkdownParser<br/>Data Loading]
        APP2[EvaluationPipeline<br/>Chain of Responsibility]
        APP3[TrainingOrchestrator<br/>Workflow Management]
    end
    
    subgraph DOM["Layer 3: Domain"]
        DOM1[NyayaStructureValidator<br/>6-Phase Validation]
        DOM2[SemanticMatcher<br/>Content Quality]
        DOM3[FallacyDetector<br/>Hetvabhasa Checks]
    end
    
    subgraph INFRA["Layer 4: Infrastructure"]
        INFRA1[UnslothAdapter<br/>Training Framework]
        INFRA2[Z3Verifier<br/>Logical Verification]
        INFRA3[HuggingFaceRepository<br/>Model Storage]
    end
    
    %% CLI to Application connections
    CLI1 --> APP3
    CLI2 --> APP2
    CLI3 --> DOM1
    CLI4 --> INFRA3
    
    %% Application to Domain connections
    APP1 --> DOM1
    APP2 --> DOM1
    APP2 --> DOM2
    APP2 --> DOM3
    APP3 --> DOM1
    
    %% Application to Infrastructure connections
    APP3 --> INFRA1
    APP3 --> INFRA3
    APP2 --> INFRA2
    
    %% Domain to Infrastructure connections
    DOM3 --> INFRA2
    
    %% Styling
    classDef cliLayer fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef appLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef domainLayer fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef infraLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    
    class CLI1,CLI2,CLI3,CLI4 cliLayer
    class APP1,APP2,APP3 appLayer
    class DOM1,DOM2,DOM3 domainLayer
    class INFRA1,INFRA2,INFRA3 infraLayer
